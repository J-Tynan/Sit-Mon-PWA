<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Situation Monitor</title>

  <!-- Import map: resolve bare module specifier for topojson-client in the browser -->
  <script type="importmap">
    {
      "imports": {
        "topojson-client": "https://unpkg.com/topojson-client@3.1.0/dist/topojson-client.module.js"
      }
    }
  </script>

  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" href="icons/app-icon.svg" sizes="any" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="icons/app-icon.svg" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header id="topbar">
    <div class="title">Situation Monitor</div>

      <div class="controls">

        <!-- Group 1: Country + Region -->
        <div class="control-group primary">
          <label class="sr-only" for="countrySelect">Country</label>
          <select id="countrySelect" title="Choose a UK country (focus view)">
            <option value="UK">United Kingdom</option>
            <option value="ENG">England</option>
            <option value="SCT">Scotland</option>
            <option value="WLS">Wales</option>
            <option value="NIR">Northern Ireland</option>
          </select>

          <label class="sr-only" for="regionSelect">Region</label>
          <select id="regionSelect" title="Choose a region (list depends on country)"></select>
        </div>

        <!-- Group 2: Search -->
        <div class="control-group primary">
          <label class="sr-only" for="ladInput">Local council</label>
          <input id="ladInput" list="ladOptions" placeholder="Search local councils" autocomplete="off" />
          <datalist id="ladOptions"></datalist>
        </div>

        <!-- Group 3: View controls -->
        <div class="control-group secondary">
          <button id="resetBtn" type="button">Reset view</button>
          <span id="zoomLevel" aria-live="polite"></span>
          <button id="zoomInBtn" type="button">+</button>
          <button id="zoomOutBtn" type="button">−</button>
        </div>

        <!-- Group 4: Settings -->
        <div class="control-group tertiary">
          <button id="settingsBtn" type="button" aria-label="Settings" title="Settings">
            <!-- your SVG stays exactly as-is -->
            <svg aria-hidden="true" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
            </svg>
          </button>
        </div>

      </div>
  </header>

  <main id="app">
    <div id="globe-container" aria-label="3D globe viewport"></div>
    <div id="fps" aria-live="off" aria-label="Frames per second"></div>
    <aside id="bin-panel" aria-label="Bin collection details"></aside>
    <aside id="layers-panel" aria-label="Layers"></aside>
    <aside id="settings-panel" aria-label="Settings" hidden>

      <div class="settings-header">
        <div>
          <div class="settings-title">Settings</div>
          <div class="settings-subtitle">Quick toggles</div>
        </div>
        <button id="settingsMinBtn" type="button" aria-label="Hide settings" title="Hide settings">−</button>
      </div>
      <div class="settings-row">
        <label>
          <input type="checkbox" id="toggleFps" /> Show FPS
        </label>
      </div>
      <div class="settings-row">
        <button id="sparkleBtn" type="button">Sparkle a star</button>
      </div>
    </aside>
    <div id="status" aria-live="polite" aria-atomic="true"></div>
    <div id="attribution" aria-label="Data attribution">
      Data: <a href="https://geoportal.statistics.gov.uk/" target="_blank" rel="noopener noreferrer">ONS Open Geography</a> (UK boundaries),
      <a href="https://www.naturalearthdata.com/" target="_blank" rel="noopener noreferrer">Natural Earth</a> (world boundaries),
      <a href="https://www.nelincs.gov.uk/" target="_blank" rel="noopener noreferrer">NELC</a> (bin schedule demo),
      <a href="https://heroicons.com/" target="_blank" rel="noopener noreferrer">Heroicons</a> (icons)
    </div>
  </main>

  <script type="module" src="src/main.js"></script>
</body>
</html>
